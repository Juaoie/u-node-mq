(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{395:function(t,v,_){"use strict";_.r(v);var s=_(54),a=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"u-node-mq"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#u-node-mq"}},[t._v("#")]),t._v(" u-node-mq")]),t._v(" "),_("p",[t._v("可以前端多模块通信的消息中心模型")]),t._v(" "),_("h2",{attrs:{id:"可能实现得功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#可能实现得功能"}},[t._v("#")]),t._v(" 可能实现得功能")]),t._v(" "),_("p",[t._v("1 动态提示 queueName 名称功能")]),t._v(" "),_("h2",{attrs:{id:"即将上线的功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#即将上线的功能"}},[t._v("#")]),t._v(" 即将上线的功能")]),t._v(" "),_("p",[t._v("1 创建消费者传递固定的数据给消费方法 "),_("code",[t._v("已实现")])]),t._v(" "),_("p",[t._v("2 emit 的方法返回 this，提供链式调用方法 "),_("code",[t._v("已实现")])]),t._v(" "),_("p",[t._v("3 once 的方法功能 "),_("code",[t._v("已上线")])]),t._v(" "),_("p",[t._v("4 demo 演示项目")]),t._v(" "),_("p",[t._v("5 log 日志项目")]),t._v(" "),_("p",[t._v("6 消息确认提供 next 方法进行手动确认 "),_("code",[t._v("已上线")])]),t._v(" "),_("p",[t._v("7 实现真的队列分发消息给消费者模式  "),_("code",[t._v("已上线")])]),t._v(" "),_("p",[t._v("8 增加系统消费失败队列")]),t._v(" "),_("h2",{attrs:{id:"安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),_("p",[_("code",[t._v("yarn add u-node-mq")])]),t._v(" "),_("p",[t._v("or")]),t._v(" "),_("p",[_("code",[t._v("npm install u-node-mq")])]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("上面是2.x文档\n    /\\\n    ||\n    ||\n  水槽线\n    ||\n    ||\n    \\/\n下面是旧文档\n")])])]),_("h2",{attrs:{id:"基本使用方法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基本使用方法"}},[t._v("#")]),t._v(" 基本使用方法")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" UNodeMQ "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u-node-mq"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unmq "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNodeMQ")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可以挂到抬手就摸得到的位置")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue.prototype.unmq = new UNodeMQ();")]),t._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建登录交换机")]),t._v("\nunmq"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("createExchange")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LOGIN_SUCCESS"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PLAN_BIND_USER"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送数据")]),t._v("\nunmq"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LOGIN_SUCCESS"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//接受数据")]),t._v("\nunmq"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PLAN_BIND_USER"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("planBindUser"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("hr"),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("上面是新文档\n    /\\\n    ||\n    ||\n  水槽线\n    ||\n    ||\n    \\/\n下面是旧文档\n")])])]),_("hr"),t._v(" "),_("h1",{attrs:{id:"u-node-mq-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#u-node-mq-2"}},[t._v("#")]),t._v(" u-node-mq")]),t._v(" "),_("p",[t._v("可以前端多模块通信的简易消息中心模型")]),t._v(" "),_("h2",{attrs:{id:"_1、为什么会有-u-node-mq-属于重复造轮子吗"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1、为什么会有-u-node-mq-属于重复造轮子吗"}},[t._v("#")]),t._v(" 1、为什么会有 u-node-mq？属于重复造轮子吗？")]),t._v(" "),_("p",[_("em",[t._v("就像"),_("a",{attrs:{href:"https://github.com/Juaoie/u-cache-ui",target:"_blank",rel:"noopener noreferrer"}},[t._v("u-cache-ui"),_("OutboundLink")],1),t._v("一样，u-node-mq 属于特定开发环境下才能用得上得插件")])]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[t._v("u-node-mq主要解决前端多模块通信问题；随着现在前端开发框架越来越多，架构设计越来越复杂，前端现在似乎更加趋向于微前端领域，即使一些中小公司用不上市面上大多数的微前端框架，但稍微大点的前端项目都已经为已有的单页面应用划分多个模块，这样的多模块视乎也是一种伪`微前端`；而在某些情况下，这些多模块通信已不能传统的通信技术了，例如：vuex、Redux或者使用事件总线等，页面间的通信技术就更加无法满足大多数场景了；\n")])])]),_("hr"),t._v(" "),_("h2",{attrs:{id:"_2、u-node-mq-核心概念"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2、u-node-mq-核心概念"}},[t._v("#")]),t._v(" 2、u-node-mq 核心概念")]),t._v(" "),_("blockquote",[_("p",[t._v("u-node-mq 是由多个模块组合而成，你可以自行组合这些模块以实现不同的功能，除了主模块你必须使用以外，其他都可以根据你特定需求来组合")])]),t._v(" "),_("ul",[_("li",[_("p",[_("code",[t._v("UNodeMQ")]),t._v(" 主模块，一般一个应用只用创建一次，需要根据需求传入其他模块的实例")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("Exchange")]),t._v(" 交换机，每个交换机就是一个分发数据到队列的路由")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("Queue")]),t._v(" 队列，队列是一个能存储少量数据和唯一能分配数据给不同服务的模块，理论上每个队列的消息应该是相同数据类型的")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("News")]),t._v(" 消息，消息一般不直接由用户创建，而是由 UNodeMQ 创建，除非你有持久化数据的需求，那么你可以配合"),_("code",[t._v("u-cache-ui api")]),t._v("管理和存储数据，在下次应用启动的时候初始化"),_("code",[t._v("news")]),t._v("到"),_("code",[t._v("queue")]),t._v("中")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("Consumer")]),t._v(" 消费者，消费者一般也不直接有用户创建，而是由 UNodeMQ 创建，除非你有其他一些更加复杂的业务需求，例如：同时创建多个不同消费者，或者创建消费特定次数的消费者等")])]),t._v(" "),_("li",[_("p",[_("code",[t._v("Logs")]),t._v(" 日志消息，方便调试开发")])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_3、unodemq"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3、unodemq"}},[t._v("#")]),t._v(" 3、UNodeMQ")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uNodeMQ "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNodeMQ")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//or")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uNodeMQ "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UNodeMQ")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nuNodeMQ"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[t._v("创建模块")]),t._v(" "),_("p",[_("strong",[t._v("Object 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("必填")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("exchanges")]),t._v(" "),_("td",[t._v("Exchange[]")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("交换机列表")])]),t._v(" "),_("tr",[_("td",[t._v("queues")]),t._v(" "),_("td",[t._v("Queues[]")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("队列列表")])]),t._v(" "),_("tr",[_("td",[t._v("logs")]),t._v(" "),_("td",[t._v("Logs")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("日志系统")])])])]),t._v(" "),_("p",[_("strong",[t._v("uNodeMQ 方法说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("logs")]),t._v(" "),_("td",[t._v("Function")]),t._v(" "),_("td",[t._v("返回 Logs 日志实例")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_4、exchange"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4、exchange"}},[t._v("#")]),t._v(" 4、Exchange")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" exchange "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exchange")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[t._v("创建交换机")]),t._v(" "),_("p",[_("strong",[t._v("Object 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("必填")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("name")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td",[t._v("交换机名称")])]),t._v(" "),_("tr",[_("td",[t._v("routes")]),t._v(" "),_("td",[t._v("String[]")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("需要匹配的队列名称")])]),t._v(" "),_("tr",[_("td",[t._v("repeater")]),t._v(" "),_("td",[t._v("Function")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("自定义路由函数，填写该参数 routes 将失效")])]),t._v(" "),_("tr",[_("td",[t._v("queues")]),t._v(" "),_("td",[t._v("Queues[]")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("队列列表")])])])]),t._v(" "),_("p",[_("strong",[t._v("exchange.repeater 方法参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("参数 1")]),t._v(" "),_("td",[t._v("content")]),t._v(" "),_("td",[t._v("此处不因该修改 content")])])])]),t._v(" "),_("p",[_("strong",[t._v("exchange.repeater 方法返回值说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("返回值")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("返回值")]),t._v(" "),_("td",[t._v("String[]")]),t._v(" "),_("td",[t._v("匹配到的队列名称列表，routes 将失效")])])])]),t._v(" "),_("p",[_("strong",[t._v("exchange 方法说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("emit")]),t._v(" "),_("td",[t._v("News")]),t._v(" "),_("td",[t._v("发送数据")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_5、queue"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5、queue"}},[t._v("#")]),t._v(" 5、Queue")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" queue "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Queue")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[t._v("创建队列")]),t._v(" "),_("p",[_("strong",[t._v("Object 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("必填")]),t._v(" "),_("th",[t._v("默认")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("name")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("队列名称")])]),t._v(" "),_("tr",[_("td",[t._v("news")]),t._v(" "),_("td",[t._v("News[]")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("[]")]),t._v(" "),_("td",[t._v("消息列表")])]),t._v(" "),_("tr",[_("td",[t._v("consumers")]),t._v(" "),_("td",[t._v("Consumer[]")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("[]")]),t._v(" "),_("td",[t._v("消费者列表")])]),t._v(" "),_("tr",[_("td",[t._v("ask")]),t._v(" "),_("td",[t._v("Boolean")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("false")]),t._v(" "),_("td",[t._v("是否需要消息确认，为 true，则需要手动确认消息")])]),t._v(" "),_("tr",[_("td",[t._v("awaitTime")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("10*1000")]),t._v(" "),_("td",[t._v("等待消息确认的最大时长，单位为 ms")])]),t._v(" "),_("tr",[_("td",[t._v("type")]),t._v(" "),_("td",[t._v('"Random"')]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v('"Random"')]),t._v(" "),_("td",[t._v("多个消费者的时候如何分发消息")])])])]),t._v(" "),_("p",[_("strong",[t._v("queue 方法说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("push")]),t._v(" "),_("td",[t._v("News")]),t._v(" "),_("td",[t._v("加入数据")])]),t._v(" "),_("tr",[_("td",[t._v("on")]),t._v(" "),_("td",[t._v("Consumer")]),t._v(" "),_("td",[t._v("订阅数据")])]),t._v(" "),_("tr",[_("td",[t._v("off")]),t._v(" "),_("td",[t._v("Consumer")]),t._v(" "),_("td",[t._v("取消订阅")])]),t._v(" "),_("tr",[_("td",[t._v("once")]),t._v(" "),_("td",[t._v("Consumer")]),t._v(" "),_("td",[t._v("一次性订阅数据")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_6、news"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6、news"}},[t._v("#")]),t._v(" 6、News")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" news "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("News")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Any"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[t._v("创建消息")]),t._v(" "),_("p",[_("strong",[t._v("news 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消息 id")])]),t._v(" "),_("tr",[_("td",[t._v("createTime")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("消息创建时间戳")])]),t._v(" "),_("tr",[_("td",[t._v("content")]),t._v(" "),_("td",[t._v("Any")]),t._v(" "),_("td",[t._v("消息内容")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_7、consumer"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_7、consumer"}},[t._v("#")]),t._v(" 7、Consumer")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" consumer "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Function"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[t._v("创建消费者")]),t._v(" "),_("p",[_("strong",[t._v("Function 方法说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("参数 1")]),t._v(" "),_("td",[t._v("News")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("strong",[t._v("Function 返回值说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("返回值")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("返回值")]),t._v(" "),_("td",[t._v("Promise<Boolean>")]),t._v(" "),_("td",[t._v("ask 为 true 生效，返回 true 则表示消费成功")])])])]),t._v(" "),_("p",[_("strong",[t._v("consumer 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消费者 id")])]),t._v(" "),_("tr",[_("td",[t._v("createTime")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("消费者创建时间戳")])]),t._v(" "),_("tr",[_("td",[t._v("consume")]),t._v(" "),_("td",[t._v("Function")]),t._v(" "),_("td",[t._v("消费方法")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_8、logs"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_8、logs"}},[t._v("#")]),t._v(" 8、Logs")]),t._v(" "),_("p",[t._v("创建日志系统")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" logs "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[_("strong",[t._v("logs 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("allExchangelogs")]),t._v(" "),_("td",[t._v("ExchangeLogs[]")]),t._v(" "),_("td",[t._v("exchange 日志列表")])]),t._v(" "),_("tr",[_("td",[t._v("allQueueLogs")]),t._v(" "),_("td",[t._v("QueueLogs[]")]),t._v(" "),_("td",[t._v("queue 日志")])]),t._v(" "),_("tr",[_("td",[t._v("allNewsLogs")]),t._v(" "),_("td",[t._v("NewsLogs[]")]),t._v(" "),_("td",[t._v("news 日志")])]),t._v(" "),_("tr",[_("td",[t._v("allConsumerLogs")]),t._v(" "),_("td",[t._v("ConsumerLogs[]")]),t._v(" "),_("td",[t._v("consumer 日志")])])])]),t._v(" "),_("p",[_("strong",[t._v("logs 方法说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("返回值")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("clear")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("Boolean")]),t._v(" "),_("td",[t._v("清空所有日志")])]),t._v(" "),_("tr",[_("td",[t._v("getAllExchangeLogs")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("ExchangeLogs[]")]),t._v(" "),_("td",[t._v("获取所有 exchange 日志")])]),t._v(" "),_("tr",[_("td",[t._v("getAllQueueLogs")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("QueueLogs[]")]),t._v(" "),_("td",[t._v("获取所有 queue 日志")])]),t._v(" "),_("tr",[_("td",[t._v("getAllNewsLogs")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("NewsLogs[]")]),t._v(" "),_("td",[t._v("获取所有 news 日志")])]),t._v(" "),_("tr",[_("td",[t._v("getAllConsumerLogs")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("ConsumerLogs[]")]),t._v(" "),_("td",[t._v("获取所有 consumer 日志")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_9、exchangelogs"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_9、exchangelogs"}},[t._v("#")]),t._v(" 9、ExchangeLogs")]),t._v(" "),_("p",[t._v("创建交换机消息日志")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" exchangeLogs "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExchangeLogs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[_("strong",[t._v("Object 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("name")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("交换机名称")])]),t._v(" "),_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("交换机 id")])]),t._v(" "),_("tr",[_("td",[t._v("emitNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("emit 成功数量")])]),t._v(" "),_("tr",[_("td",[t._v("dispenseNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("数据分配成功数量")])]),t._v(" "),_("tr",[_("td",[t._v("queueIdList")]),t._v(" "),_("td",[t._v("String[]")]),t._v(" "),_("td",[t._v("消息队列 id 的数量")])]),t._v(" "),_("tr",[_("td",[t._v("queueNameList")]),t._v(" "),_("td",[t._v("String[]")]),t._v(" "),_("td",[t._v("消息队列名称列表")])]),t._v(" "),_("tr",[_("td",[t._v("queueNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("消息队列数量")])])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_10、queuelogs"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_10、queuelogs"}},[t._v("#")]),t._v(" 10、QueueLogs")]),t._v(" "),_("p",[t._v("创建消息队列日志")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" queueLogs "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueueLogs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[_("strong",[t._v("queueLogs 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("name")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("队列名称")])]),t._v(" "),_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("队列 id")])]),t._v(" "),_("tr",[_("td",[t._v("ask")]),t._v(" "),_("td",[t._v("Boolean")]),t._v(" "),_("td",[t._v("是否需要消息确认")])]),t._v(" "),_("tr",[_("td",[t._v("awaitTimeFormat")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("等待消息确认的最大时长，ask 为 true 才有")])]),t._v(" "),_("tr",[_("td",[t._v("type")]),t._v(" "),_("td",[t._v('"random"')]),t._v(" "),_("td",[t._v("多个消费者的时候如何分发消息")])]),t._v(" "),_("tr",[_("td",[t._v("newsIdList")]),t._v(" "),_("td",[t._v("String[]")]),t._v(" "),_("td",[t._v("队列内消息 id 列表")])]),t._v(" "),_("tr",[_("td",[t._v("newsNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("队列内消息数量")])]),t._v(" "),_("tr",[_("td",[t._v("allNewsNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("队列内所有消息数量（包括已消费的）")])]),t._v(" "),_("tr",[_("td",[t._v("consumerIdList")]),t._v(" "),_("td",[t._v("String[]")]),t._v(" "),_("td",[t._v("队列消费者 id 列表")])]),t._v(" "),_("tr",[_("td",[t._v("consumerNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("队列消费者者数量")])]),t._v(" "),_("tr",[_("td",[t._v("allConsumerNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("队列内所有消费者数量（包括已取消的）")])])])]),t._v(" "),_("h2",{attrs:{id:"_11、newslogs"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_11、newslogs"}},[t._v("#")]),t._v(" 11、NewsLogs")]),t._v(" "),_("p",[t._v("创建消息日志")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newsLogs "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NewsLogs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[_("strong",[t._v("newsLogs 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消息 id")])]),t._v(" "),_("tr",[_("td",[t._v("createTimeFormat")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消息创建时间")])]),t._v(" "),_("tr",[_("td",[t._v("destroyTimeFormat")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消息销毁时间")])]),t._v(" "),_("tr",[_("td",[t._v("size")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消息大小")])]),t._v(" "),_("tr",[_("td",[t._v("readNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("读取次数")])]),t._v(" "),_("tr",[_("td",[t._v("latestReadTimeFormat")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("最近读取时间")])])])]),t._v(" "),_("h2",{attrs:{id:"_12、consumerlogs"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_12、consumerlogs"}},[t._v("#")]),t._v(" 12、ConsumerLogs")]),t._v(" "),_("p",[t._v("创建消费者日志")]),t._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" consumerLogs "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerLogs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("p",[_("strong",[t._v("consumerLogs 参数说明")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消费者 id")])]),t._v(" "),_("tr",[_("td",[t._v("createTimeFormat")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消费者创建时间")])]),t._v(" "),_("tr",[_("td",[t._v("destroyTimeFormat")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("消息销毁时间")])]),t._v(" "),_("tr",[_("td",[t._v("consumeNum")]),t._v(" "),_("td",[t._v("Number")]),t._v(" "),_("td",[t._v("消费次数")])]),t._v(" "),_("tr",[_("td",[t._v("latestConsumeTimeFormat")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("最近消费时间")])])])])])}),[],!1,null,null,null);v.default=a.exports}}]);