{
  "version": 3,
  "sources": ["../src/index.ts", "../src/utils/tools.ts", "../src/internal/Logs.ts", "../src/internal/Exchange.ts", "../src/internal/News.ts", "../src/internal/Consumer.ts", "../src/internal/Queue.ts", "../src/core/ExchangeCollectionHandle.ts", "../src/core/QueueCollectionHandle.ts", "../src/core/Collection.ts", "../src/core/UNodeMQ.ts"],
  "sourcesContent": ["import Exchange from \"./internal/Exchange\";\r\nimport Queue, { ConsumMode } from \"./internal/Queue\";\r\nimport Consumer from \"./internal/Consumer\";\r\nimport News from \"./internal/News\";\r\nimport Logs from \"./internal/Logs\";\r\n\r\nimport UNodeMQ, { createUnmq, createQuickUnmq, QuickUNodeMQ, PluginInstallFunction } from \"./core/UNodeMQ\";\r\nexport default UNodeMQ;\r\n\r\nexport { createUnmq, createQuickUnmq, QuickUNodeMQ, PluginInstallFunction };\r\n\r\nexport { Exchange, Queue, Consumer, News, Logs };\r\n\r\nexport { ConsumMode };\r\n\r\nexport const extend = Object.assign;\r\nexport const objectToString = Object.prototype.toString;\r\nexport const toTypeString = (value: unknown): string => objectToString.call(value);\r\nexport const isArray = Array.isArray;\r\nexport const isMap = (val: unknown): val is Map<any, any> => toTypeString(val) === \"[object Map]\";\r\nexport const isSet = (val: unknown): val is Set<any> => toTypeString(val) === \"[object Set]\";\r\n\r\nexport const isDate = (val: unknown): val is Date => val instanceof Date;\r\nexport const isFunction = (val: unknown): val is Function => typeof val === \"function\";\r\nexport const isString = (val: unknown): val is string => typeof val === \"string\";\r\nexport const isNumber = (val: unknown): val is number => typeof val === \"number\";\r\nexport const isBoolean = (val: unknown): val is boolean => typeof val === \"boolean\";\r\nexport const isSymbol = (val: unknown): val is symbol => typeof val === \"symbol\";\r\nexport const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === \"object\";\r\n\r\nexport const isPromise = <T = any>(val: unknown): val is Promise<T> => {\r\n  return isObject(val) && isFunction(val.then) && isFunction(val.catch);\r\n};\r\n\r\n//TODO:\u8FD0\u884C\u901A\u8FC7\u6784\u9020\u51FD\u6570\u52A8\u6001\u5411Exchange\u548CQueue\u6DFB\u52A0\u5C5E\u6027\r\n", "/**\r\n * \u5DE5\u5177\u7C7B\r\n */\r\nexport default class Tools {\r\n  /**\r\n   * \u83B7\u53D6\u968F\u673A\u6570\r\n   * @returns\r\n   */\r\n  static random(): string {\r\n    return String(Math.round(Math.random() * 10000000000))\r\n  }\r\n  static promiseSetTimeout = (time = 0) =>\r\n    new Promise((resolve) => setTimeout(resolve, time))\r\n\r\n  /**\r\n   * \u83B7\u53D6\u683C\u5F0F\u5316\u65F6\u95F4\r\n   * @returns\r\n   */\r\n  static getTimeFormat(time?: string | number): string {\r\n    let now = null\r\n    if (time) now = new Date(time)\r\n    else now = new Date()\r\n\r\n    const year = now.getFullYear() //\u5E74\r\n    const month = now.getMonth() + 1 //\u6708\r\n    const day = now.getDate() //\u65E5\r\n\r\n    const hh = now.getHours() //\u65F6\r\n    const mm = now.getMinutes() //\u5206\r\n\r\n    let clock = year + '-'\r\n\r\n    if (month < 10) clock += '0'\r\n    clock += month + '-'\r\n\r\n    if (day < 10) clock += '0'\r\n    clock += day + ' '\r\n\r\n    if (hh < 10) clock += '0'\r\n    clock += hh + ':'\r\n    if (mm < 10) clock += '0'\r\n    clock += mm\r\n    return clock\r\n  }\r\n\r\n  /**\r\n   *   //\u5B57\u7B26\u7F16\u7801\u6570\u503C\u5BF9\u5E94\u7684\u5B58\u50A8\u957F\u5EA6\uFF1A\r\n  //UCS-2\u7F16\u7801(16\u8FDB\u5236) UTF-8 \u5B57\u8282\u6D41(\u4E8C\u8FDB\u5236)\r\n  //0000 - 007F       0xxxxxxx \uFF081\u5B57\u8282\uFF09\r\n  //0080 - 07FF       110xxxxx 10xxxxxx \uFF082\u5B57\u8282\uFF09\r\n  //0800 - FFFF       1110xxxx 10xxxxxx 10xxxxxx \uFF083\u5B57\u8282\uFF09\r\n   * @param str \r\n   * @returns \r\n   */\r\n  static memorySize = (str: string): string => {\r\n    let totalLength = 0\r\n    let charCode\r\n    for (let i = 0; i < str.length; i++) {\r\n      charCode = str.charCodeAt(i)\r\n      if (charCode < 0x007f) {\r\n        totalLength++\r\n      } else if (0x0080 <= charCode && charCode <= 0x07ff) {\r\n        totalLength += 2\r\n      } else if (0x0800 <= charCode && charCode <= 0xffff) {\r\n        totalLength += 3\r\n      } else {\r\n        totalLength += 4\r\n      }\r\n    }\r\n    if (totalLength >= 1024 * 1024)\r\n      return (totalLength / (1024 * 1024)).toFixed(2) + 'MB'\r\n    if (totalLength >= 1024 && totalLength < 1024 * 1024)\r\n      return (totalLength / 1024).toFixed(2) + 'KB'\r\n    else return totalLength + 'B'\r\n  }\r\n}\r\n", "export default class Logs {\r\n  static unmq = null; //new UNodeMQ({ exchangeName: \"logs\", queueName: [\"error\"] });\r\n  static error(message: any) {\r\n    // this.unmq.emit()\r\n    console.error(message);\r\n  }\r\n  static log(message: any) {\r\n    console.log(message);\r\n  }\r\n}\r\n", "import Tools from \"../utils/tools\";\r\nimport Logs from \"./Logs\";\r\n/**\r\n * \u4E2D\u7EE7\u5668\u7C7B\u578B\r\n */\r\ntype Repeater<D> = (content: D) => Promise<string[]> | string[];\r\n\r\nexport type Option<D> = {\r\n  routes?: string[];\r\n  repeater?: Repeater<D>;\r\n  name?: string;\r\n};\r\n/**\r\n * \u4EA4\u6362\u673A\r\n */\r\nexport default class Exchange<D> {\r\n  [k: string]: any;\r\n  name?: string;\r\n  /**\r\n   * id\r\n   */\r\n  private readonly id: string = Tools.random();\r\n  getId() {\r\n    return this.id;\r\n  }\r\n  /**\r\n   * \u9759\u6001\u8DEF\u7531\r\n   */\r\n  private routes: string[] = [];\r\n  getRoutes() {\r\n    return this.routes;\r\n  }\r\n  pushRoutes(routes: string[]) {\r\n    this.routes = Array.from(new Set(this.routes.concat(routes)));\r\n  }\r\n  setRoutes(routes: string[]) {\r\n    this.routes = routes;\r\n  }\r\n  /**\r\n   * \u52A8\u6001\u8DEF\u7531\uFF08\u4E2D\u7EE7\u5668\uFF09\r\n   */\r\n  private repeater: Repeater<D> = () => this.getRoutes();\r\n  getRepeater() {\r\n    return this.repeater;\r\n  }\r\n  setRepeater(repeater: Repeater<D>) {\r\n    this.repeater = repeater;\r\n  }\r\n\r\n  constructor(option?: Option<D>) {\r\n    if (option?.routes !== undefined) this.routes = option.routes;\r\n    if (option?.repeater !== undefined) this.repeater = option.repeater;\r\n    if (option?.name !== undefined) this.name = option.name;\r\n  }\r\n\r\n  /**\r\n   * \u5220\u9664routes\r\n   * @param routes\r\n   */\r\n  removeRoutes(routes?: string[]) {\r\n    if (routes === undefined) this.routes = [];\r\n    else this.routes = this.routes.filter((item) => routes.indexOf(item) !== -1);\r\n  }\r\n\r\n  /**\r\n   * \u83B7\u53D6\u961F\u5217\u540D\u79F0\u5217\u8868\r\n   * @param content\r\n   * @returns\r\n   */\r\n  async getQueueNameList(content: D): Promise<string[]> {\r\n    try {\r\n      //\u4E2D\u7EE7\u5668\u6A21\u5F0F\r\n      return await this.repeater(content);\r\n    } catch (error) {\r\n      Logs.error(`exchange function getstringList exception`);\r\n      return [];\r\n    }\r\n  }\r\n}\r\n", "import Tools from \"../utils/tools\";\r\n\r\nexport default class News<D> {\r\n  /**\r\n   * id\r\n   */\r\n  private readonly id: string = Tools.random();\r\n  getId() {\r\n    return this.id;\r\n  }\r\n  /**\r\n   * \u6D88\u8D39\u8005\u521B\u5EFA\u65F6\u95F4\u6233\r\n   */\r\n  readonly createTime: number;\r\n  /**\r\n   * \u6D88\u606F\u5185\u5BB9\r\n   */\r\n  readonly content: D;\r\n  /**\r\n   * \u5269\u4F59\u53EF\u91CD\u590D\u6D88\u8D39\u6B21\u6570\r\n   */\r\n  consumedTimes: number = -1;\r\n\r\n  constructor(content: D) {\r\n    this.createTime = new Date().getTime();\r\n    this.content = content;\r\n  }\r\n}\r\n", "import { isPromise } from \"../index\";\r\nimport Tools from \"../utils/tools\";\r\nimport Logs from \"./Logs\";\r\nimport News from \"./News\";\r\nexport type Next = (value?: boolean) => void;\r\n\r\nexport interface Consume<D> {\r\n  (content: D, next?: Next, payload?: any): Promise<any> | any;\r\n  (content: D, payload?: any): any;\r\n}\r\ntype ThenParameter<D> = (isOk: boolean) => void;\r\ninterface Payload<D> {\r\n  then: (res: ThenParameter<D>) => void;\r\n}\r\nexport default class Consumer<D> {\r\n  /**\r\n   * id\r\n   */\r\n  private readonly id: string = Tools.random();\r\n  getId() {\r\n    return this.id;\r\n  }\r\n  /**\r\n   * \u6D88\u8D39\u8005\u521B\u5EFA\u65F6\u95F4\u6233\r\n   */\r\n  createTime: number;\r\n  /**\r\n   * \u6D88\u8D39\u65B9\u6CD5\r\n   */\r\n  consume: Consume<D>;\r\n  /**\r\n   * \u56FA\u5B9A\u53C2\u6570\r\n   */\r\n  payload?: any;\r\n  constructor(consume: Consume<D>, payload?: any) {\r\n    this.createTime = new Date().getTime();\r\n    this.consume = consume;\r\n    this.payload = payload;\r\n  }\r\n  /**\r\n   * \u6D88\u8D39\u6D88\u606F\r\n   * @param news\r\n   * @param ask\r\n   * @returns\r\n   */\r\n  consumption(news: News<D>, ask: boolean): Payload<D> {\r\n    const then = (thenParameter: ThenParameter<D>) => {\r\n      //\u4E0D\u52A0\u5165\u4EFB\u52A1\u961F\u5217\uFF0C\u4F1A\u5BFC\u81F4\u6D88\u8D39\u5931\u8D25\u7684\u6570\u636E\u91CD\u5199\u5230\u961F\u5217\u5931\u8D25\r\n      try {\r\n        if (!ask) {\r\n          //\u4E0D\u9700\u8981\u786E\u8BA4\u7684\u6D88\u8D39\u65B9\u6CD5\r\n          this.consume(news.content, this.payload);\r\n          return thenParameter(true);\r\n        }\r\n        //\u6784\u5EFA\u6D88\u606F\u786E\u8BA4\u7684\u65B9\u6CD5\r\n        let confirm: Next = (value = true) => thenParameter(value);\r\n        //\u9700\u8981\u786E\u8BA4\u7684\u6D88\u8D39\u65B9\u6CD5\r\n        const res = this.consume(news.content, confirm, this.payload);\r\n        //\u5982\u679C\u6D88\u606F\u9700\u8981\u786E\u8BA4\uFF0C\u4E14\u8FD4\u56DE\u7684\u5185\u5BB9\u4E3APromise\r\n        if (isPromise(res)) {\r\n          res\r\n            .then((onfulfilled) => {\r\n              thenParameter(Boolean(onfulfilled));\r\n            })\r\n            .catch(() => {\r\n              thenParameter(false);\r\n            });\r\n        } else if (typeof res === \"boolean\") {\r\n          confirm = () => {};\r\n          thenParameter(res);\r\n        }\r\n      } catch (error) {\r\n        Logs.error(\"Consumer consumption error\");\r\n        thenParameter(!ask);\r\n      }\r\n    };\r\n    return {\r\n      then,\r\n    };\r\n  }\r\n}\r\n", "import News from \"./News\";\r\nimport Consumer, { Consume } from \"./Consumer\";\r\nimport Logs from \"./Logs\";\r\nimport Tools from \"../utils/tools\";\r\ninterface Option<D> {\r\n  ask?: boolean;\r\n  rcn?: number;\r\n  news?: News<D>[];\r\n  consumerList?: Consumer<D>[];\r\n  mode?: ConsumMode;\r\n  name?: string;\r\n}\r\nexport enum ConsumMode {\r\n  \"Random\" = \"Random\",\r\n  \"All\" = \"All\",\r\n}\r\n/**\r\n * \u961F\u5217\uFF0C\u7406\u8BBA\u4E0A\u4E00\u4E2A\u961F\u5217\u7684\u6570\u636E\u683C\u5F0F\u5E94\u8BE5\u5177\u6709\u4E00\u81F4\u6027\r\n */\r\nexport default class Queue<D> {\r\n  [k: string]: any;\r\n  name?: string;\r\n  /**\r\n   * id\r\n   */\r\n  private readonly id: string = Tools.random();\r\n  getId() {\r\n    return this.id;\r\n  }\r\n  /**\r\n   * \u662F\u5426\u9700\u8981\u6D88\u606F\u786E\u8BA4\r\n   */\r\n  ask: boolean = false;\r\n  /**\r\n   * \u53EF\u91CD\u65B0\u6D88\u8D39\u6B21\u6570\uFF0C\u6D88\u8D39\u5931\u8D25\u4F1A\u91CD\u590D\u6D88\u8D39\r\n   */\r\n  rcn: number = 3;\r\n  /**\r\n   * \u6D88\u8D39\u6A21\u5F0F\r\n   */\r\n  mode: ConsumMode = ConsumMode.Random;\r\n  /**\r\n   * \u6D88\u606F list\r\n   */\r\n  private news: News<D>[] = [];\r\n  getNews() {\r\n    return this.news;\r\n  }\r\n  /**\r\n   * \u6D88\u8D39\u8005 list\r\n   */\r\n  private consumerList: Consumer<D>[] = [];\r\n  getConsumerList() {\r\n    return this.consumerList;\r\n  }\r\n  constructor(option?: Option<D>) {\r\n    if (option?.ask !== undefined) this.ask = option.ask;\r\n    if (option?.news !== undefined) this.news = option.news;\r\n    if (option?.consumerList !== undefined) this.consumerList = option.consumerList;\r\n    if (option?.rcn !== undefined) this.rcn = option.rcn;\r\n    if (option?.mode !== undefined) this.mode = option.mode;\r\n    if (option?.name !== undefined) this.name = option.name;\r\n  }\r\n  /**\r\n   * \u901A\u8FC7\u6D88\u8D39\u65B9\u6CD5\u79FB\u9664\u6307\u5B9A\u6D88\u8D39\u8005\r\n   * @param consume\r\n   * @returns\r\n   */\r\n  removeConsumer(consume: Consume<D>) {\r\n    const index = this.consumerList.findIndex((item) => item.consume === consume);\r\n    if (index === -1) return false;\r\n    this.consumerList.splice(index, 1);\r\n    return true;\r\n  }\r\n  /**\r\n   * \u79FB\u9664\u6240\u6709\u6D88\u8D39\u8005\r\n   * @returns\r\n   */\r\n  removeAllConsumer() {\r\n    this.consumerList = [];\r\n    return true;\r\n  }\r\n  /**\r\n   * \u79FB\u9664\u6240\u6709\u6D88\u606F\r\n   * @returns\r\n   */\r\n  removeAllNews() {\r\n    this.news = [];\r\n    return true;\r\n  }\r\n  /**\r\n   * \u901A\u8FC7id\u79FB\u9664\u6307\u5B9A\u6D88\u8D39\u8005\r\n   * @param consumerId\r\n   * @returns\r\n   */\r\n  removeConsumerById(consumerId: string) {\r\n    const index = this.consumerList.findIndex((item) => item.getId() === consumerId);\r\n    if (index === -1) return false;\r\n    this.consumerList.splice(index, 1);\r\n    return true;\r\n  }\r\n  /**\r\n   * \u52A0\u5165\u6D88\u8D39\u8005\r\n   * @param consumerList\r\n   */\r\n  pushConsumer(consumer: Consumer<D>) {\r\n    //\u8FC7\u6EE4\u91CD\u590D\u7684\u6D88\u8D39\u8005id\r\n    if (this.consumerList.findIndex((item) => item.getId() === consumer.getId()) === -1)\r\n      this.consumerList.push(consumer);\r\n\r\n    if (this.news.length > 0 && this.consumerList.length > 0) this.consumeNews();\r\n  }\r\n  /**\r\n   * \u52A0\u5165\u6D88\u8D39\u8005\u6D88\u8D39\u4E3B\u4F53\r\n   * @param consume\r\n   * @param payload\r\n   */\r\n  pushConsume(consume: Consume<D>, payload?: any) {\r\n    const consumer = new Consumer(consume, payload);\r\n    this.pushConsumer(consumer);\r\n  }\r\n  /**\r\n   * \u52A0\u5165\u6D88\u606F\r\n   * @param news\r\n   */\r\n  pushNews(news: News<D>) {\r\n    if (news.consumedTimes === -1) news.consumedTimes = this.rcn;\r\n\r\n    if (news.consumedTimes > 0) {\r\n      //\u8FC7\u6EE4\u91CD\u590D\u7684\u6D88\u606Fid\r\n      if (this.news.findIndex((item) => item.getId() === news.getId()) === -1) this.news.push(news);\r\n    }\r\n\r\n    if (this.news.length > 0 && this.consumerList.length > 0) this.consumeNews();\r\n  }\r\n  /**\r\n   * \u52A0\u5165\u6D88\u606F\u5185\u5BB9\r\n   * @param content\r\n   */\r\n  pushContent(content: D) {\r\n    const news = new News(content);\r\n    this.pushNews(news);\r\n  }\r\n\r\n  /**\r\n   * \u5F39\u51FA\u4E00\u6761\u6D88\u606F\r\n   * @returns\r\n   *\r\n   */\r\n  eject(): News<D> | null {\r\n    if (this.news.length > 0) return this.news.splice(0, 1)[0];\r\n    else return null;\r\n  }\r\n  /**\r\n   * \u6D88\u8D39\u65B9\u6CD5\r\n   * \u53EA\u8981\u6D88\u8D39\u8005\u548C\u6D88\u606F\u5B58\u5728\u5C31\u4F1A\u6D88\u8D39\u6389\u6240\u6709\u7684\u6D88\u606F\r\n   * @returns\r\n   */\r\n  consumeNews() {\r\n    if (this.news.length === 0) return;\r\n    if (this.consumerList.length === 0) return;\r\n    const news = this.eject();\r\n    if (news === null) return;\r\n    if (this.mode === ConsumMode.Random) {\r\n      //\u968F\u673A\u6D88\u8D39\u8005\u7684\u7D22\u5F15\r\n      const index = Math.round(Math.random() * (this.consumerList.length - 1));\r\n      const consumer = this.consumerList[index];\r\n      this.consumption(news, consumer);\r\n    } else if (this.mode === ConsumMode.All) {\r\n      for (const consumer of this.consumerList) {\r\n        this.consumption(news, consumer);\r\n      }\r\n    }\r\n  }\r\n  //TODO:\u8BBE\u7F6E\u961F\u5217\u662F\u5426\u662F\u540C\u6B65\u6D88\u8D39\uFF0C\u5982\u679C\u662F\u540C\u6B65\u6D88\u8D39\u5219\u53EA\u80FD\u4E00\u4E2A\u6D88\u606F\u4E00\u4E2A\u6D88\u606F\u6D88\u8D39\r\n  //TODO:\u8BBE\u7F6E\u6D88\u8D39\u8005\u662F\u5426\u662F\u540C\u6B65\u6D88\u8D39\uFF0C\u5982\u679C\u662F\u540C\u6B65\u6D88\u8D39\uFF0C\u5219\u6BCF\u6B21\u53EA\u80FD\u6D88\u8D39\u4E00\u6761\u6D88\u606F\r\n  //TODO:\u589E\u52A0\u6700\u957F\u6D88\u8D39\u65F6\u95F4\r\n  //\u589E\u52A0\u540C\u6B65\u6D88\u8D39\u548C\u5F02\u6B65\u6D88\u8D39\u5C5E\u6027\r\n  consumption(news: News<D>, consumer: Consumer<D>) {\r\n    consumer.consumption(news, this.ask).then((isOk: boolean) => {\r\n      if (isOk) {\r\n        Logs.log(`\u961F\u5217 \u6D88\u8D39\u6210\u529F`);\r\n      } else {\r\n        Logs.log(`\u961F\u5217 \u6D88\u8D39\u5931\u8D25`);\r\n        news.consumedTimes--;\r\n        this.pushNews(news);\r\n      }\r\n      if (this.news.length > 0) this.consumeNews();\r\n    });\r\n  }\r\n}\r\n", "import { Exchange } from \"../index\";\r\nimport Logs from \"../internal/Logs\";\r\n\r\nexport default class ExchangeCollectionHandle {\r\n  private exchangeCollection = new Map<string, Exchange<any>>();\r\n  has(exchangeName: string) {\r\n    if (this.exchangeCollection.has(exchangeName)) return true;\r\n    else {\r\n      Logs.error(`${exchangeName} not find`);\r\n      return false;\r\n    }\r\n  }\r\n  setExchangeCollection(exchangeCollection: Record<string, Exchange<unknown>>) {\r\n    this.exchangeCollection = new Map(Object.entries(exchangeCollection));\r\n  }\r\n  getExchange(exchangeName: string): Exchange<unknown> | null {\r\n    const exchange = this.exchangeCollection.get(exchangeName);\r\n    if (exchange === undefined) {\r\n      Logs.error(`${exchangeName} not find`);\r\n      return null;\r\n    }\r\n    return exchange;\r\n  }\r\n  getExchangeList() {\r\n    return [...this.exchangeCollection.values()];\r\n  }\r\n  /**\r\n   * \u6839\u636E\u4EA4\u6362\u673A\u540D\u79F0\u83B7\u53D6\u961F\u5217\u540D\u79F0\u5217\u8868\r\n   * @param exchangeName\r\n   * @param content\r\n   * @returns\r\n   */\r\n  async getQueueNameList(exchangeName: string, content: unknown) {\r\n    const exchagne = this.getExchange(exchangeName);\r\n    if (exchagne === null) return [];\r\n    return exchagne.getQueueNameList(content);\r\n  }\r\n}\r\n", "import { Logs, Queue, News } from \"../index\";\r\nimport { Consume } from \"../internal/Consumer\";\r\n\r\n/**\r\n * \u961F\u5217\u96C6\u5408\r\n */\r\nexport default class QueueCollectionHandle {\r\n  private queueCollection = new Map<string, Queue<any>>();\r\n  has(queueName: string) {\r\n    if (this.queueCollection.has(queueName)) return true;\r\n    else {\r\n      Logs.error(`${queueName} not find`);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  setQueueCollection(queueCollection: Record<string, Queue<unknown>>) {\r\n    this.queueCollection = new Map(Object.entries(queueCollection));\r\n  }\r\n  getQueue(queueName: string): Queue<unknown> | null {\r\n    const queue = this.queueCollection.get(queueName);\r\n    if (queue === undefined) {\r\n      Logs.error(`${queueName} not find`);\r\n      return null;\r\n    }\r\n    return queue;\r\n  }\r\n  getQueueList() {\r\n    return [...this.queueCollection.values()];\r\n  }\r\n  addQueue(queue: Queue<unknown>) {\r\n    if (queue.name === undefined) throw \"queue.name is undefined\";\r\n    this.queueCollection.set(queue.name, queue);\r\n  }\r\n  pushNewsToQueue(queueName: string, news: News<unknown>) {\r\n    this.getQueue(queueName)?.pushNews(news);\r\n  }\r\n  /**\r\n   * \u6DFB\u52A0\u4E00\u4E2A\u6D88\u606F\u5185\u5BB9\u5230\u961F\u5217\r\n   * @param queueName\r\n   * @param content\r\n   * @returns\r\n   */\r\n  pushContentToQueue(queueName: string, content: unknown) {\r\n    this.getQueue(queueName)?.pushContent(content);\r\n  }\r\n  /**\r\n   * \u8BA2\u9605\u961F\u5217\r\n   * @param queueName\r\n   * @param consume\r\n   * @param payload\r\n   * @returns\r\n   */\r\n  subscribeQueue(queueName: string, consume: Consume<unknown>, payload?: any) {\r\n    this.getQueue(queueName)?.pushConsume(consume, payload);\r\n  }\r\n  /**\r\n   * \u53D6\u6D88\u8BA2\u9605\u961F\u5217\r\n   * @param queueName\r\n   * @param consume\r\n   */\r\n  unsubscribeQueue(queueName: string, consume?: Consume<unknown>): boolean {\r\n    if (!this.has(queueName)) return false;\r\n    if (consume === undefined) {\r\n      return !!this.getQueue(queueName)?.removeAllConsumer();\r\n    } else {\r\n      return !!this.getQueue(queueName)?.removeConsumer(consume);\r\n    }\r\n  }\r\n}\r\n", "import { Exchange, Queue, News } from \"../index\";\r\nimport { Consume } from \"../internal/Consumer\";\r\nimport ExchangeCollectionHandle from \"./ExchangeCollectionHandle\";\r\nimport QueueCollectionHandle from \"./QueueCollectionHandle\";\r\nexport default class Collection<\r\n  ExchangeCollection extends Record<string, Exchange<unknown>>,\r\n  QueueCollection extends Record<string, Queue<unknown>>\r\n> {\r\n  private readonly exchangeCollectionHandle = new ExchangeCollectionHandle();\r\n  private readonly queueCollectionHandle = new QueueCollectionHandle();\r\n\r\n  constructor(exchangeCollection: ExchangeCollection, queueCollection: QueueCollection) {\r\n    for (const name in exchangeCollection) {\r\n      exchangeCollection[name].name = name;\r\n    }\r\n    for (const name in queueCollection) {\r\n      queueCollection[name].name = name;\r\n    }\r\n    this.exchangeCollectionHandle.setExchangeCollection(exchangeCollection);\r\n    this.queueCollectionHandle.setQueueCollection(queueCollection);\r\n  }\r\n  getExchange<E extends keyof ExchangeCollection & string>(exchangeName: E) {\r\n    return this.exchangeCollectionHandle.getExchange(exchangeName);\r\n  }\r\n  getExchangeList() {\r\n    return this.exchangeCollectionHandle.getExchangeList();\r\n  }\r\n  getQueue<Q extends keyof QueueCollection & string>(queueName: Q) {\r\n    return this.queueCollectionHandle.getQueue(queueName);\r\n  }\r\n  getQueueList() {\r\n    return this.queueCollectionHandle.getQueueList();\r\n  }\r\n  addQueue(queue: Queue<unknown>) {\r\n    this.queueCollectionHandle.addQueue(queue);\r\n  }\r\n  /**\r\n   * \u53D1\u9001\u6D88\u606F\u5230\u4EA4\u6362\u673A\r\n   * @param exchangeName\r\n   * @param news\r\n   */\r\n  pushNewsListToExchange<E extends keyof ExchangeCollection & string>(exchangeName: E, ...news: News<unknown>[]) {\r\n    for (const newsItem of news) {\r\n      //\u5206\u522B\u53D1\u9001\u6BCF\u4E00\u6761\u6D88\u606F\r\n      this.exchangeCollectionHandle.getQueueNameList(exchangeName, newsItem.content).then((queueNameList) => {\r\n        for (const queueName in queueNameList) {\r\n          this.pushNewsListToQueue(queueName, newsItem);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * \u53D1\u9001\u6D88\u606F\u5230\u961F\u5217\r\n   * @param queueName\r\n   * @param news\r\n   */\r\n  pushNewsListToQueue<Q extends keyof QueueCollection & string>(queueName: Q, ...news: News<unknown>[]) {\r\n    for (const newsItem of news) {\r\n      //\u5206\u522B\u53D1\u9001\u6BCF\u4E00\u6761\u6D88\u606F\r\n      this.queueCollectionHandle.pushNewsToQueue(queueName, newsItem);\r\n    }\r\n  }\r\n  /**\r\n   * \u53D1\u9001\u6D88\u606F\u5185\u5BB9\u5230\u4EA4\u6362\u673A\r\n   * @param exchangeName\r\n   * @param contentList\r\n   */\r\n  pushContentListToExchange<E extends keyof ExchangeCollection & string>(exchangeName: E, ...contentList: unknown[]) {\r\n    for (const content of contentList) {\r\n      //\u5206\u522B\u53D1\u9001\u6BCF\u4E00\u6761\u6D88\u606F\r\n      this.exchangeCollectionHandle.getQueueNameList(exchangeName, content).then((queueNameList) => {\r\n        for (const queueName of queueNameList) {\r\n          this.pushContentListToQueue(queueName, content);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   *  \u53D1\u9001\u6D88\u606F\u5185\u5BB9\u5230\u961F\u5217\r\n   * @param queueName\r\n   * @param contentList\r\n   */\r\n  pushContentListToQueue<Q extends keyof QueueCollection & string>(queueName: Q, ...contentList: unknown[]) {\r\n    for (const content of contentList) {\r\n      //\u5206\u522B\u53D1\u9001\u6BCF\u4E00\u6761\u6D88\u606F\r\n      this.queueCollectionHandle.pushContentToQueue(queueName, content);\r\n    }\r\n  }\r\n  /**\r\n   * \u8BA2\u9605\u961F\u5217\r\n   * @param queueName\r\n   * @param consume\r\n   * @param payload\r\n   */\r\n  subscribeQueue<Q extends keyof QueueCollection & string>(queueName: Q, consume: Consume<any>, payload?: any) {\r\n    this.queueCollectionHandle.subscribeQueue(queueName, consume, payload);\r\n  }\r\n  /**\r\n   * \u53D6\u6D88\u8BA2\u9605\u961F\u5217\r\n   */\r\n  unsubscribeQueue<Q extends keyof QueueCollection & string>(queueName: Q, consume?: Consume<any>) {\r\n    this.queueCollectionHandle.unsubscribeQueue(queueName, consume);\r\n  }\r\n}\r\n", "import { Exchange, Queue, isFunction } from \"../index\";\r\nimport { Consume, Next } from \"../internal/Consumer\";\r\n\r\n/**\r\n * \u83B7\u53D6\u961F\u5217\u540D\u79F0\u8FD4\u56DE\u7684promise\u5BFC\u81F4\u6D88\u8D39\u4E8B\u4EF6\u52A0\u5165\u5FAE\u4EFB\u52A1\u961F\u5217\u5EF6\u8FDF\u6D88\u8D39\uFF08ios\u5C5E\u4E8E\u52A0\u5165\u666E\u901A\u4EFB\u52A1\u961F\u5217\uFF09\r\n * \u8FD9\u6837\u540C\u65F6\u4FDD\u8BC1\u4E86\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6570\u636E\u80FD\u51C6\u786E\u5206\u53D1\r\n */\r\n\r\nimport Collection from \"./Collection\";\r\n\r\nexport type ReturnPanShapeExchange<T> = T extends Exchange<infer U> ? U : never;\r\nexport type ReturnPanShapeQueue<T> = T extends Queue<infer U> ? U : never;\r\n\r\nexport type PluginInstallFunction = <\r\n  ExchangeCollection extends Record<string, Exchange<any>>,\r\n  QueueCollection extends Record<string, Queue<any>>\r\n>(\r\n  unmq: UNodeMQ<ExchangeCollection, QueueCollection>,\r\n  ...options: any[]\r\n) => void;\r\nexport type Plugin =\r\n  | (PluginInstallFunction & { install?: PluginInstallFunction })\r\n  | {\r\n      install: PluginInstallFunction;\r\n    };\r\nexport function createUnmq<\r\n  ExchangeCollection extends Record<string, Exchange<any>>,\r\n  QueueCollection extends Record<string, Queue<any>>\r\n>(exchangeCollection: ExchangeCollection, queueCollection: QueueCollection) {\r\n  return new UNodeMQ(exchangeCollection, queueCollection);\r\n}\r\n//TODO:\u589E\u52A0\u53EF\u4EE5\u4F7F\u7528\u6570\u7EC4\u7684\u65B9\u5F0F\u521B\u5EFAExchange\u548CQueue\r\n/**\r\n * UNodeMQ \u53D1\u5E03\u8BA2\u9605\u6A21\u578B\r\n */\r\nexport default class UNodeMQ<\r\n  ExchangeCollection extends Record<string, Exchange<any>>,\r\n  QueueCollection extends Record<string, Queue<any>>\r\n> extends Collection<ExchangeCollection, QueueCollection> {\r\n  constructor(exchangeCollection: ExchangeCollection, queueCollection: QueueCollection) {\r\n    super(exchangeCollection, queueCollection);\r\n  }\r\n  private readonly installedPlugins: Set<Plugin> = new Set();\r\n  use(plugin: Plugin, ...options: any[]) {\r\n    if (this.installedPlugins.has(plugin)) {\r\n      console.log(`Plugin has already been applied to target unmq.`);\r\n    } else if (plugin && isFunction(plugin.install)) {\r\n      this.installedPlugins.add(plugin);\r\n      plugin.install<ExchangeCollection, QueueCollection>(this, ...options);\r\n    } else if (isFunction(plugin)) {\r\n      this.installedPlugins.add(plugin);\r\n      plugin<ExchangeCollection, QueueCollection>(this, ...options);\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * \u53D1\u5C04\u6570\u636E\u5230\u4EA4\u6362\u673A\r\n   * @param contentList \u6D88\u606F\u4F53\u5217\u8868\r\n   * @returns\r\n   */\r\n  emit<E extends keyof ExchangeCollection & string>(\r\n    exchangeName: E,\r\n    ...contentList: ReturnPanShapeExchange<ExchangeCollection[E]>[]\r\n  ) {\r\n    super.pushContentListToExchange(exchangeName, ...contentList);\r\n    return this;\r\n  }\r\n  /**\r\n   * \u53D1\u5C04\u6570\u636E\u5230\u961F\u5217\r\n   * @param queueName\r\n   * @param contentList\r\n   * @returns\r\n   */\r\n  emitToQueue<Q extends keyof QueueCollection & string>(\r\n    queueName: Q,\r\n    ...contentList: ReturnPanShapeQueue<QueueCollection[Q]>[]\r\n  ) {\r\n    super.pushContentListToQueue(queueName, ...contentList);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  \u8BA2\u9605\u961F\u5217\u6D88\u606F\r\n   * \u961F\u5217\u540D\u79F0\u4E3Anull \u5219\u8BA2\u9605\u6240\u6709\u961F\u5217\r\n   * \u6D88\u8D39\u65B9\u6CD5\r\n   * @param queueName \u961F\u5217\u540D\u79F0\r\n   * @param consume \u6D88\u8D39\u65B9\u6CD5\r\n   * @param payload \u56FA\u5B9A\u53C2\u6570\uFF0C\u6709\u6548\u8F7D\u8377\uFF0C\u5728\u6BCF\u6B21\u6D88\u8D39\u7684\u65F6\u5019\u90FD\u4F20\u7ED9\u6D88\u8D39\u8005\r\n   * @returns\r\n   */\r\n  on<Q extends keyof QueueCollection & string>(\r\n    queueName: Q,\r\n    consume: Consume<ReturnPanShapeQueue<QueueCollection[Q]>>,\r\n    payload?: any\r\n  ) {\r\n    super.subscribeQueue(queueName, consume, payload);\r\n    return () => this.off(queueName, consume);\r\n  }\r\n\r\n  /**\r\n   * \u79FB\u9664\u6D88\u8D39\u8005\r\n   * @param queueName\r\n   * @param consume\r\n   */\r\n  off<Q extends keyof QueueCollection>(queueName: Q, consume: Consume<ReturnPanShapeQueue<QueueCollection[Q]>>): this;\r\n  off<Q extends keyof QueueCollection>(queueName: Q): this;\r\n  off<Q extends keyof QueueCollection & string>(x: Q, y?: Consume<ReturnPanShapeQueue<QueueCollection[Q]>>): this {\r\n    super.unsubscribeQueue(x, y);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * \u4E00\u6B21\u6027\u8BA2\u9605\u6D88\u606F\r\n   * @param queueName\r\n   * @param consume\r\n   * @param payload\r\n   * @returns\r\n   */\r\n  once<Q extends keyof QueueCollection & string>(\r\n    queueName: Q,\r\n    consume: Consume<ReturnPanShapeQueue<QueueCollection[Q]>>,\r\n    payload?: any\r\n  ) {\r\n    let consumeNum = 0;\r\n    const consumeProxy = (content: any, next?: Next, payload?: any) => {\r\n      if (consumeNum === 1) return; //\u4E00\u4E2A\u6D88\u8D39\u8005\u53EF\u80FD\u9700\u8981\u6D88\u8017\u591A\u6761\u6D88\u606F,, error \u961F\u5217\u91CC\u9762\u7684\u6D88\u606F\u88AB\u6D88\u8D39\u4E86\uFF0C\u4F46\u662F\u8FD9\u91CC\u8FD4\u56DE\u4E3A\u672A\u88AB\u6D88\u8D39\r\n      consumeNum++;\r\n      this.off(queueName, consumeProxy);\r\n      return consume(content, next, payload);\r\n    };\r\n    this.on(queueName, consumeProxy, payload);\r\n    return this;\r\n  }\r\n}\r\nexport function createQuickUnmq<D, QueueCollection extends Record<string, Queue<D>>>(\r\n  exchange: Exchange<D>,\r\n  queueCollection: QueueCollection\r\n) {\r\n  return new QuickUNodeMQ(exchange, queueCollection);\r\n}\r\n/**\r\n * quick unmq\r\n * single type unmq\r\n */\r\nexport class QuickUNodeMQ<D, QueueCollection extends Record<string, Queue<D>>> {\r\n  constructor(private readonly exchange: Exchange<D>, private readonly queueCollection: QueueCollection) {\r\n    for (const name in queueCollection) {\r\n      queueCollection[name].name = name;\r\n    }\r\n  }\r\n  /**\r\n   * \u53D1\u5C04\u6570\u636E\u5230\u4EA4\u6362\u673A\r\n   * @param contentList \u6D88\u606F\u4F53\u5217\u8868\r\n   * @returns\r\n   */\r\n  emit(...contentList: D[]) {\r\n    for (const content of contentList) {\r\n      this.exchange.getQueueNameList(content).then((queueNameList: string[]) => {\r\n        for (const queueName of queueNameList) {\r\n          if (this.queueCollection[queueName] === undefined) continue;\r\n          this.queueCollection[queueName].pushContent(content);\r\n        }\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * \u53D1\u5C04\u6570\u636E\u5230\u961F\u5217\r\n   * @param queueName\r\n   * @param contentList\r\n   * @returns\r\n   */\r\n  emitToQueue<Q extends keyof QueueCollection & string>(queueName: Q, ...contentList: D[]) {\r\n    for (const content of contentList) {\r\n      this.queueCollection[queueName].pushContent(content);\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   *  \u8BA2\u9605\u961F\u5217\u6D88\u606F\r\n   * \u961F\u5217\u540D\u79F0\u4E3Anull \u5219\u8BA2\u9605\u6240\u6709\u961F\u5217\r\n   * \u6D88\u8D39\u65B9\u6CD5\r\n   * @param queueName \u961F\u5217\u540D\u79F0\r\n   * @param consume \u6D88\u8D39\u65B9\u6CD5\r\n   * @param payload \u56FA\u5B9A\u53C2\u6570\uFF0C\u6709\u6548\u8F7D\u8377\uFF0C\u5728\u6BCF\u6B21\u6D88\u8D39\u7684\u65F6\u5019\u90FD\u4F20\u7ED9\u6D88\u8D39\u8005\r\n   * @returns\r\n   */\r\n  on<Q extends keyof QueueCollection & string>(queueName: Q, consume: Consume<D>, payload?: any) {\r\n    this.queueCollection[queueName].pushConsume(consume, payload);\r\n    return () => this.off(queueName, consume);\r\n  }\r\n\r\n  /**\r\n   * \u79FB\u9664\u6D88\u8D39\u8005\r\n   * @param queueName\r\n   * @param consume\r\n   */\r\n  off<Q extends keyof QueueCollection>(queueName: Q, consume: Consume<D>): this;\r\n  off<Q extends keyof QueueCollection>(queueName: Q): this;\r\n  off<Q extends keyof QueueCollection & string>(x: Q, y?: Consume<D>): this {\r\n    if (y === undefined) {\r\n      this.queueCollection[x].removeAllConsumer();\r\n    } else this.queueCollection[x].removeConsumer(y);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * \u4E00\u6B21\u6027\u8BA2\u9605\u6D88\u606F\r\n   * @param queueName\r\n   * @param consume\r\n   * @param payload\r\n   * @returns\r\n   */\r\n  once<Q extends keyof QueueCollection & string>(queueName: Q, consume: Consume<D>, payload?: any) {\r\n    let consumeNum = 0;\r\n    const consumeProxy = (content: any, next?: Next, payload?: any) => {\r\n      if (consumeNum === 1) return; //\u4E00\u4E2A\u6D88\u8D39\u8005\u53EF\u80FD\u9700\u8981\u6D88\u8017\u591A\u6761\u6D88\u606F,, error \u961F\u5217\u91CC\u9762\u7684\u6D88\u606F\u88AB\u6D88\u8D39\u4E86\uFF0C\u4F46\u662F\u8FD9\u91CC\u8FD4\u56DE\u4E3A\u672A\u88AB\u6D88\u8D39\r\n      consumeNum++;\r\n      this.off(queueName, consumeProxy);\r\n      return consume(content, next, payload);\r\n    };\r\n    this.on(queueName, consumeProxy, payload);\r\n    return this;\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
