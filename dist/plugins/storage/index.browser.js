(()=>{var a=class{static random(){return String(Math.round(Math.random()*1e10))}static getTimeFormat(e){let t=null;e?t=new Date(e):t=new Date;let n=t.getFullYear(),o=t.getMonth()+1,l=t.getDate(),s=t.getHours(),c=t.getMinutes(),u=n+"-";return o<10&&(u+="0"),u+=o+"-",l<10&&(u+="0"),u+=l+" ",s<10&&(u+="0"),u+=s+":",c<10&&(u+="0"),u+=c,u}};a.promiseSetTimeout=(e=0)=>new Promise(t=>setTimeout(t,e)),a.memorySize=e=>{let t=0,n;for(let o=0;o<e.length;o++)n=e.charCodeAt(o),n<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535?t+=3:t+=4;return t>=1024*1024?(t/(1024*1024)).toFixed(2)+"MB":t>=1024&&t<1024*1024?(t/1024).toFixed(2)+"KB":t+"B"};var i=class{static error(e){console.error(e)}static log(e){console.log(e)}};i.unmq=null;var xe=Array.isArray;var g=r=>typeof r=="string";var d="s###",f="n###";function p(r){return g(r)?d+r:f+JSON.stringify(r)}function y(r){let e=r.slice(0,4);if(e===d)return r.slice(4);if(e===f)try{return JSON.parse(r.slice(4))}catch(t){return console.log("JSON.pares error"),""}}var S=(t=>(t.SESSION="session",t.LOCAL="local",t))(S||{}),h=class{init(e){this.memoryData=e}getData(e){return this.memoryData[e]}setData(e,t){this.memoryData[e]=t}},m=class{constructor(e){this.storageMemory=new h;this.storageType="session";this.unmq=null;e!=null&&e.storageMemory&&(this.storageMemory=e.storageMemory),e!=null&&e.storageSign&&(this.storageSign=e.storageSign),e!=null&&e.storageType&&(this.storageType=e.storageType)}install(e,...t){this.unmq=e;let n={},o=e.getQueueList().map(s=>s.name);for(let s of o)n[s]=null,Object.defineProperty(n,s,{get(){return this.getStorageSync(s)},set(c){this.setStorageSync(s,c)}});function l(){for(let s of o)this.storageMemory.setData(s,this.getStorageSync(s)),Object.defineProperty(n,s,{get(){return this.storageMemory.getData(s)},set(c){this.setStorageSync(s,c),this.storageMemory.setData(s,c)}})}return{storage:n,init:l}}getStorageSync(e){let t=null,n={["session"]:sessionStorage,["local"]:localStorage};if(this.storageSign){let o=n[this.storageType].getItem(this.storageSign.encryptName(e));o&&(t=this.storageSign.decryptValue(o))}else t=n[this.storageType].getItem(e);return t?y(t):null}setStorageSync(e,t){if(t==null)return this.removeStorageSync(e);let n={["session"]:sessionStorage,["local"]:localStorage};t=p(t),this.storageSign?n[this.storageType].setItem(this.storageSign.encryptName(e),this.storageSign.encryptValue(t)):n[this.storageType].setItem(e,t)}removeStorageSync(e){let t={["session"]:sessionStorage,["local"]:localStorage};this.storageSign?t[this.storageType].removeItem(this.storageSign.encryptName(e)):t[this.storageType].removeItem(e)}};})();
