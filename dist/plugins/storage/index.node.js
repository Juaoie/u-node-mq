var m=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var D=(s,e)=>{for(var t in e)m(s,t,{get:e[t],enumerable:!0})},k=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of S(e))!w.call(s,r)&&r!==t&&m(s,r,{get:()=>e[r],enumerable:!(n=C(e,r))||n.enumerable});return s};var T=s=>k(m({},"__esModule",{value:!0}),s);var E={};D(E,{StorageType:()=>Q,default:()=>h});module.exports=T(E);var a=class{static random(){return String(Math.round(Math.random()*1e10))}static getTimeFormat(e){let t=null;e?t=new Date(e):t=new Date;let n=t.getFullYear(),r=t.getMonth()+1,l=t.getDate(),o=t.getHours(),c=t.getMinutes(),u=n+"-";return r<10&&(u+="0"),u+=r+"-",l<10&&(u+="0"),u+=l+" ",o<10&&(u+="0"),u+=o+":",c<10&&(u+="0"),u+=c,u}};a.promiseSetTimeout=(e=0)=>new Promise(t=>setTimeout(t,e)),a.memorySize=e=>{let t=0,n;for(let r=0;r<e.length;r++)n=e.charCodeAt(r),n<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535?t+=3:t+=4;return t>=1024*1024?(t/(1024*1024)).toFixed(2)+"MB":t>=1024&&t<1024*1024?(t/1024).toFixed(2)+"KB":t+"B"};var i=class{static error(e){console.error(e)}static log(e){console.log(e)}};i.unmq=null;var be=Array.isArray;var d=s=>typeof s=="string";var f="s###",p="n###";function y(s){return d(s)?f+s:p+JSON.stringify(s)}function x(s){let e=s.slice(0,4);if(e===f)return s.slice(4);if(e===p)try{return JSON.parse(s.slice(4))}catch(t){return console.log("JSON.pares error"),""}}var Q=(t=>(t.SESSION="session",t.LOCAL="local",t))(Q||{}),g=class{init(e){this.memoryData=e}getData(e){return this.memoryData[e]}setData(e,t){this.memoryData[e]=t}},h=class{constructor(e){this.storageMemory=new g;this.storageType="session";this.unmq=null;e!=null&&e.storageMemory&&(this.storageMemory=e.storageMemory),e!=null&&e.storageSign&&(this.storageSign=e.storageSign),e!=null&&e.storageType&&(this.storageType=e.storageType)}install(e,...t){this.unmq=e;let n={},r=e.getQueueList().map(o=>o.name);for(let o of r)n[o]=null,Object.defineProperty(n,o,{get(){return this.getStorageSync(o)},set(c){this.setStorageSync(o,c)}});function l(){for(let o of r)this.storageMemory.setData(o,this.getStorageSync(o)),Object.defineProperty(n,o,{get(){return this.storageMemory.getData(o)},set(c){this.setStorageSync(o,c),this.storageMemory.setData(o,c)}})}return{storage:n,init:l}}getStorageSync(e){let t=null,n={["session"]:sessionStorage,["local"]:localStorage};if(this.storageSign){let r=n[this.storageType].getItem(this.storageSign.encryptName(e));r&&(t=this.storageSign.decryptValue(r))}else t=n[this.storageType].getItem(e);return t?x(t):null}setStorageSync(e,t){if(t==null)return this.removeStorageSync(e);let n={["session"]:sessionStorage,["local"]:localStorage};t=y(t),this.storageSign?n[this.storageType].setItem(this.storageSign.encryptName(e),this.storageSign.encryptValue(t)):n[this.storageType].setItem(e,t)}removeStorageSync(e){let t={["session"]:sessionStorage,["local"]:localStorage};this.storageSign?t[this.storageType].removeItem(this.storageSign.encryptName(e)):t[this.storageType].removeItem(e)}};0&&(module.exports={StorageType});
