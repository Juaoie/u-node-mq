import{isString as i,isObject as s}from"../../index";import{getStorageSync as S,setStorageSync as g}from"./storageHandle";export var StorageType=(o=>(o.SESSION="session",o.LOCAL="local",o))(StorageType||{});function c(e){if(i(e))return e;if(s(e))return e.type;console.log("\u7C7B\u578B\u9519\u8BEF")}function p(e){if(i(e))return null;if(s(e))return e.key;console.log("\u7C7B\u578B\u9519\u8BEF")}export function createStoragePlugin(e,r){r=r||{};const o={};for(const t in e)o[t]=null;return r.storageMemory.init(JSON.parse(JSON.stringify(o))),{storage:o,init:()=>{for(const t in e){const n=c(e[t]),y=p(e[t])||r.key;r.storageMemory&&r.storageMemory.setData(t,S(t,n,y)),Object.defineProperty(o,t,{get(){return r.storageMemory?r.storageMemory.getData(t):S(t,n,y)},set(a){g(t,n,a,y),r.storageMemory&&r.storageMemory.setData(t,a)}})}}}}
